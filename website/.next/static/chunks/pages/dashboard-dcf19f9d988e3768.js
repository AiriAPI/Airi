(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(9770)}])},2104:function(e,t,r){"use strict";r.r(t);var o=r(5893);t.default=()=>(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsx)("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-blue-500 h-12 w-12 mb-4 animate-spin"})})},9770:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var o=r(5893),a=r(7294),s=r(6154),n=r(1955),i=r(1163),l=r(2920);r(1399);var c=r(2104),d=r(2474),m=r.n(d),h=r(816).Buffer,u=r(5675),p=r.n(u),x=()=>{let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(null),[d,u]=(0,a.useState)(""),[x,g]=(0,a.useState)(!0),[b,f]=(0,a.useState)(!1),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{let t=n.Z.get("access_token");if(!t){e.push("https://discord.com/api/oauth2/authorize?client_id=".concat("708610461829955594","&redirect_uri=").concat("http://localhost:3000/callback","&response_type=code&scope=identify%20email"));return}let o=async()=>{try{let e=await s.Z.get("https://discord.com/api/users/@me",{headers:{Authorization:"Bearer ".concat(t)}});r(e.data),a(e.data)}catch(t){console.error("Error fetching user details:",t),n.Z.remove("access_token"),localStorage.removeItem("showToken"),e.push("https://discord.com/api/oauth2/authorize?client_id=".concat("708610461829955594","&redirect_uri=").concat("http://localhost:3000/callback","&response_type=code&scope=identify%20email"))}finally{f(!0)}},a=async e=>{if(!e)return;let t=await s.Z.post("/api/auth/user",{id:e.id,email:e.email});u(t.data)};o(),j();let i=localStorage.getItem("showToken");return i?g(JSON.parse(i)):g(!1),window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[]);let w=()=>{localStorage.removeItem("showToken")},k=()=>{n.Z.remove("access_token"),localStorage.removeItem("showToken"),e.push("/")},y=async()=>{try{var e;let r=parseInt(localStorage.getItem("last_regen_time")||"0",10),o=Date.now(),a=o-r;if(a<3e4)throw Error("Rate limit exceeded. Please wait ".concat(((3e4-a)/1e3).toFixed(0)," seconds before regenerating the token again."));let i=n.Z.get("access_token");if(!i)throw Error("Access token not found.");let c=(e=t.id,function(e,t){var r;let o=h.from(e).toString("base64").replace(/=/g,"-"),a=Date.now(),s=h.from(Math.floor(a/1e3).toString()).toString("base64").replace(/=/g,"-"),n="".concat(o,".").concat(s),i=m().createHmac("sha256","owo").update(n).digest("hex").slice(0,5),l=(r=Math.floor(4*Math.random())+4,m().randomBytes(Math.ceil(r/2)).toString("hex").slice(0,r)).replace(/M/g,"N").replace(/=/g,"-"),c="".concat(n,".").concat(i).concat(l);return c}(e,0)),d=await s.Z.post("/api/auth/user",{id:t.id,token:c});u(c),g(!0),localStorage.setItem("last_regen_time",o.toString()),l.Am.info("Successfully regenerated!",{position:l.Am.POSITION.BOTTOM_RIGHT}),console.log("POST request response:",d.data)}catch(e){e.message.startsWith("Rate limit exceeded")?l.Am.error(e.message,{position:l.Am.POSITION.BOTTOM_RIGHT}):(console.error("Error regenerating token:",e),l.Am.error("Error regenerating token.",{position:l.Am.POSITION.BOTTOM_RIGHT}))}},j=()=>{g(e=>!e),localStorage.setItem("showToken",JSON.stringify(!x))};return(0,o.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,o.jsx)(l.Ix,{}),b&&t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"p-4",children:(0,o.jsxs)("nav",{className:"max-w-screen-lg mx-auto flex flex-col md:flex-row items-center justify-between",children:[(0,o.jsx)("div",{className:"text-white font-bold text-xl mb-4 md:mb-0",children:(0,o.jsx)("span",{children:"Dashboard"})}),(0,o.jsxs)("div",{className:"space-x-4 flex items-center relative",children:[" ",(0,o.jsx)("button",{onClick:()=>e.push("/"),className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Home"}),(0,o.jsx)("button",{onClick:()=>e.push("https://docs.waifu.it"),className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Documentation"}),(0,o.jsxs)("div",{className:"relative flex items-center",children:[" ",(0,o.jsx)(p(),{src:"https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png"),alt:t.username,className:"w-8 h-8 rounded-full cursor-pointer"}),(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),k()},className:"block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent",children:"Logout"})]})]})]})}),(0,o.jsx)("div",{className:"py-8",children:(0,o.jsx)("div",{className:"max-w-screen-lg mx-auto px-4",children:d&&(0,o.jsxs)("div",{className:"max-w-md mx-auto bg-gray-100 p-4 rounded-md mb-4",style:{marginTop:"140px"},children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)("span",{className:"text-sm font-medium",children:"Token:"})}),(0,o.jsxs)("div",{className:"relative max-w-xs md:max-w-full",children:[(0,o.jsx)("input",{ref:v,type:x?"text":"password",value:d,readOnly:!0,className:"w-full px-3 py-2 rounded-md bg-white border border-gray-300 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(x?"text-base":"text-sm"," md:text-base text-ellipsis"),onWheel:e=>{e.preventDefault();let{deltaY:t}=e,r=v.current,o=r.scrollHeight-r.clientHeight,a=r.scrollTop+t;a>=o?g(!1):a<=0&&g(!0)}}),(0,o.jsx)("div",{className:"absolute top-0 right-0 bottom-0 flex items-center px-3 cursor-pointer",onClick:j,children:x?(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2 9l6 6 6-6"})]}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 4.535c2.71-.973 5.566-.973 8.276 0M3 3l18 18"})]})})]}),(0,o.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,o.jsx)("button",{onClick:y,className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",style:{marginTop:"5px"},children:"Regenerate"}),(0,o.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(d),l.Am.success("Token copied to clipboard!",{position:l.Am.POSITION.BOTTOM_RIGHT})},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",style:{marginTop:"5px"},children:"Copy"})]})]})})}),(0,o.jsx)("footer",{className:"w-full h-12 border-t border-gray-300 flex justify-center items-center mt-auto md:mt-10 lg:mt-20 text-sm",style:{marginTop:"160px"},children:"Made with ❤️ by Aeryk"})]}):(0,o.jsx)("div",{className:"flex flex-grow items-center justify-center",children:(0,o.jsx)(c.default,{})})]})}}},function(e){e.O(0,[714,925,22,774,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);